---

title: 字符串
date: 2019-07-07 16:57:18
tags:
categories: C语言
---

### 一、字符串字面量

#### 1、定义

(1) 一对双引号""括起来的字符序列

(2)本质：是一个以字符'\0'结尾的**特殊字符数组** 

#### 2、延续字符串字面量

(1)场合：字符串字面量长度过长无法放置在单独一行内，分别放在不同的行

(2)字符\法

```c
printf("hello c, \
	hello world!");
```

(3)双引号""法

```c
printf("hello c, "
	"hello world!");
```



#### 3、存储字符串字面量

(1)本质：是一个以字符'\0'结尾的**特殊字符数组** 

(2)编译器遇到长度为N的字符串字面量，会为其分配长度为N+1的内存空间

(3)字符

```c
//空格字符  ' '   值：32

//空字符   '\0'   值：0(8位上的值都是0)

//零字符    '0'   值：48
```

(4)字符数组：编译器看做是一个指针(指向数组第一个字符的指针)

(5)字符串字面量操作

```c
//可以用一个指针指向字符串(字符数组)
char *p = "hello, world";

//访问字符串内容
printf("%c", p[1]);

//把字符数组元素赋值给字符变量
char c = p[3];

//修改字符数组的元素是非法无效
*p[4] = 'c';

//修改字符串字面量会导致未定义的行为
*p= 'A';
```



(6)理解

 C语言将长度为N的字符串字面量存储在一个长度为N+1的字符数组中，且字符数组是const修饰

  一经声明、初始化后字符数组元素不能修改，所以可以访问字符串字面量的值，但是不能修改

 存储字符串字面量既然是存储在字符数组中，则可以使用指针去访问字符串字面量



### 二、字符串变量

#### 1、声明字符串变量

(1)字符数组长度=字符串长度(不包括'\0')+1(为'\0'留一个位置)

(2)惯用法

```c
#define STR_LEN 100;

char str[STR_LEN + 1];
```

(3)字符串长度：从第0个元素开始直至遇到第一个空字符'\0'(假设在第N个位置遇到，则数组长度为N)

(4)字符串： 要以'\0'结尾，但是'\0'位置不一定是在数组末尾一个



#### 2、初始化字符串变量

(1)字符串字面量形式

```c
char c[8] = "hello,C";
```

(2)字符数组形式

```c
char c[8] = {'h', 'e','l', 'l', 'o', ',', 'C'};
```

(3)初始化表达式过短

```c
char c[20] = {'h', 'e','l', 'l', 'o', ',', 'C'};

//前7个元素被填满,分别为hello,c，第7个位置开始到第19个位置的值用'\0'填满
```

(4)初始化表达式长度 >= 数组长度

 结果：**编译器不会存储'\0'，导致字符数组无法作用字符串,只是当做普通数组**

```c
//字符串长度为7
char c[7] = "hello,C";
```

(5)字符串变量声明、初始化

 操作：省略字符数组长度，由编译器自动计算长度

```c
char c[] = "hello,C";
```

(6)结论

```c
//初始化表达式比数组长度短时，剩余字符元素的值用'\0'

//初始化表达式长度 >= 数组长度,编译器不会存储'\0'，导致字符数组无法作用字符串,只是当做普通数组
```

#### 3、字符数组和字符指针

(1)字符数组

```c
//声明为数组时，则可以修改字符数组的元素的值，字符串是变量
char c[] = "Linux";
```

(2)字符指针

```c
//声明为指针时，则字符串是一个字面量，不可以修改
char *c = "Linux";
```



### 三、字符串总结

#### 1、字符串字面量

(1)本质上是一个字符数组

(2)一个指针指向该字符数组的首元素的首地址(指针指向字符数组首元素)

(3)存储字符字面量的字符数组可以看做是一个const修饰的数组，一经声明、初始化不能修改

(4)存储位置

#### 2、字符串变量

(1)本质上是一个字符数组

(2)一个数组声明、初始化的值该字符串

(3)字符数组如果没有用const修饰，则初始化后可以修改字符数组元素的值

(4)存储位置：

#### 3、字符串形式参数写法

(1)数组名写法

(2指针变量写法

(3)字符串字面量写法

#### 4、总结

(1)字符串左边是一个指针，则该字符串是字符串字面量，字符数组的值不能修改

(2)字符串左边是一个没有const修饰字符数组，则字符数组的值可以修改

(3)字符字面量和字符串变量相同：本质上都是用字符数组表示字符串

(4)字符字面量和字符串变量不同：一个数组可以修改元素的值,一个数组不能修改元素的值



### 四、字符串的读写

#### 1、printf写

(1)原理

   逐个写字符串中的字符，直至遇到空字符'\0'停止。

   如果没有遇到'\0'，则越过字符串末尾继续写，直到在内存中某个地方遇到空字符

(2)格式：%s

(3)例子

```c
char str[] = "CASPP APUE";

//使用%s格式输出
printf("%s", str);
```



#### 2、puts写入

(1)参数：字符数组名/指针

(2)特点：写完字符串，会额外添加一个换行符'\n'

(3)例子

```c
char str[] = "CASPP APUE";

puts(str);
```



#### 3、scanf读取

(1)格式：%s

(2)数组名前不需要加&，编译器传入数组名会自动转换为一个指针

(3)读取原理

​	读取字符串时，会**跳过空白字符**，从**第一个非空白字**符读起，然后遇到空白字符时停止读取，在字符串末尾存储一个空字符。

(4)特点：字符串永远不会包含空白字符，导致不会读取一整行输入

(5)空白字符：换行符'\n'、制表符'\t'、空格字符' '

(6)例子

```c
#define STR_LEN 6

//定义字符数组
char str[STR_LEN];

//读取字符串
scanf("%s", str);
```



#### 4、gets读取

(1)参数：数组名/指针

(2)特点

 不会在读取跳过空白字符，会从第一个字符读起直至遇到换行符，但不会将换行符存储到字符数组，用空字符代替换行符存储到数组

(3)例子

```c
#define STR_LEN 6

//定义字符数组
char str[STR_LEN];

//读取字符串
gets(str);
```



#### 5、逐个字符读取字符串

(1)原理：使用getchar()函数循环逐个读取字符,当读取到'\n'时读取结束，丢弃'\n'，并在末尾添加'\0'

(2)要素：getchar()函数、while循环、读取结束临界条件、字符数组末尾'\0'添加

(3)临界读取结束条件

  读取的字符串长度(不包含空字符)大于规定的字符长度时跳出循环

  读取到换行符'\n'(字符串长度 <= 规定的字符长度)

  当字符串长度 < 规定的长度，提前读取到换行符时，剩余的元素没有显示初始化

(4)例子

```c
#define STR_LEN 10

char str[STR_LEN];

int ch, i = 0;

while((ch = getchar()) != '\n') {
    if(i < STR_LEN) {
        str[i++] = ch;
    }
}

str[i] = '\0';
```



### 五、字符串函数库

#### 1、strcpy复制函数

#### 2、strlen字符串长度函数

#### 3、strcat拼接函数

#### 4、strcmp比较函数



### 六、字符串惯用法

#### 1、搜索字符串末尾

#### 2、复制字符串



### 七、字符串数组

